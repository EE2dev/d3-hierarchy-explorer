!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3")):"function"==typeof define&&define.amd?define(["exports","d3"],t):t(e.hierarchyExplorer={},e.d3)}(this,function(e,B){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,a=!1,i=void 0;try{for(var r,l=e[Symbol.iterator]();!(o=(r=l.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function l(n,o,a,i){var r=a.debugOn;if(n.fromFile)n.data.endsWith(".json")?B.json(n.data).then(function(e){r&&(console.log("Initial Data: "),console.log(e));var t=B.hierarchy(e);r&&(console.log("hierarchy: "),console.log(t)),i(o,t)}):n.data.endsWith(".csv")?B.dsv(n.delimiter,n.data,n.autoConvert?n.convertTypesFunction:void 0).then(function(e){r&&console.log(e),n.flatData&&(e=c(e,n.hierarchyLevels,n.keyField,n.delimiter,n.separator,a,n.autoConvert,n.convertTypesFunction));var t=d(e,n.keyField);r&&(console.log("hierarchy: "),console.log(t)),i(o,t)}):console.log("File must end with .json or .csv");else{var e=void 0;if(n.isJSON)e=B.hierarchy(n.data);else{var t=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"aside#data",n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],o=arguments[3],a=B.select(t).text().trim();return B.dsvFormat(e).parse(a,n?o:void 0)}(n.delimiter,n.data,!1,n.convertTypesFunction);n.flatData&&(t=c(t,n.hierarchyLevels,n.keyField,n.delimiter,n.separator,a,n.autoConvert,n.convertTypesFunction)),e=d(t,n.keyField),r&&(console.log("embedded data: "),console.log(e))}i(o,e)}}function d(e,t){return B.stratify().id(function(e){return e[t]}).parentId(function(e){return e.parent})(e)}function A(e,t,n,o,a){var i=function(e,t,n,o){for(var a=1===n?t[0]:e[t[n-1]],i=0;i<n;i++)0===i?a=t[0]:a+=o+e[t[i]];return a}(e,t,n,a);return i+o+(i+a+e[t[n]])}function c(e,o,t,a,i,n,r,l){function d(e){return function(t,n){return Object.keys(t).forEach(function(e){return t[e]=n})}(e,"")}var c=n.debugOn,g=n.nodeLabelFieldFlatData,s=void 0,u=void 0,h=new Map,f=void 0,p=void 0,k=void 0,m=!0;e.forEach(function(n){m=!0,o.forEach(function(e,t){0<t&&m&&(p={},c&&n[e]&&(console.log("row[key]: "),console.log(n),console.log("key: "),console.log(e)),t===o.length-1?(f=A(n,o,t,a,i),h.get(f)||(Object.assign(p,n),p[g]=n[e],h.set(f,p))):(f=A(n,o,t,a,i),n[o[t+1]]?h.get(f)||(Object.assign(p,n),d(p),p[g]=n[e],h.set(f,p)):(Object.assign(p,n),p[g]=n[e],h.set(f,p),m=!1)))})}),c&&console.log(h),k="parent"+a+t,Object.keys(e[0]).forEach(function(e){k+=a+e}),s=(k+=a+g)+"\n",k=a+o[0]+a,k+=a.repeat(Object.keys(e[0]).length),o[0]!==i&&(k+=o[0]),s+=k+"\n";var y=!0,v=!1,b=void 0;try{for(var L,x=h[Symbol.iterator]();!(y=(L=x.next()).done);y=!0){var S=L.value,F=W(S,2),I=F[0],D=F[1];k=I,Object.values(D).forEach(function(e){k+=a+e}),s+=k+"\n"}}catch(e){v=!0,b=e}finally{try{!y&&x.return&&x.return()}finally{if(v)throw b}}return c&&(console.log("converted linked Data:"),console.log(s)),(u=B.dsvFormat(a).parse(s,r?l:void 0)).map(function(e){e[g]=e[g]?e[g]:" "}),c&&(console.log("converted linked Data array:"),console.log(u)),u}var b={},g=void 0,i=void 0,s=void 0,t=void 0;b.initialize=function(e){i=s,s=(g=e).linkLabelOn?g.linkLabelField:void 0,g.debugOn&&(console.log("oldLabel:"),console.log(i),console.log("newLabel:"),console.log(s))},b.getLinkD=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],o=b.getLinkStrength(e.parent,g),a=b.getLinkStrength(e,g),i=void 0;if("down"===t)if(n){var r=e.parent.children[e.parent.children.length-1].x;i="M 0 "+-1*Math.floor(o/2)+" V"+(r+a/2-e.parent.x)}else i="M 0 "+-1*Math.floor(o/2)+" V"+(e.x+a/2-e.parent.x);else"right"===t&&(i="M 0 0H"+(e.y-(e.parent.y+o/2)));return i},b.getDy=function(e){return g.linkLabelOnTop?"0.35em":Math.ceil(-.5*b.getLinkStrength(e)-3)},b.getInitialDy=function(){return B.select(this).attr("dy")?g.linkLabelOnTop?B.select(this).attr("dy").endsWith("em")?B.select(this).attr("dy"):"0.35em":B.select(this).attr("dy").endsWith("em")?0:B.select(this).attr("dy"):null},b.getLinkStrength=function(e){return e.data?g.linkStrengthStatic?g.linkStrengthValue:g.linkStrengthScale(e.data[g.linkStrengthField]):0},b.getLinkStroke=function(e){return g.linkColorStatic?g.defaultColor:g.linkColorScale(e.data[g.linkColorField])},b.getLinkStrokeWidth=function(e){return b.getLinkStrength(e)+"px"},b.getLinkLabel=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:g.linkLabelField;return g.linkLabelOn?e.data[t]:""},b.getLinkLabelFormatted=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:g.linkLabelField;return g.linkLabelOn?isNaN(e.data[t])?e.data[t]:g.linkLabelFormat(e.data[t])+g.linkLabelUnit:""},b.getLinkTextTween=function(e){var t=B.select(this);if(!g.linkLabelOn)return function(){t.text("")};var n=b.getLinkLabel(e,i),o=b.getLinkLabel(e,s);if(isNaN(n)||isNaN(o))return function(){t.text(o)};var a=B.interpolateNumber(n,o);return function(e){t.text(g.linkLabelFormat(a(e))+g.linkLabelUnit)}},b.getLinkRTranslate=function(e){return"translate("+b.getLinkStrength(e.parent)/2+" "+(e.x-e.parent.x)+")"},b.getLinkLabelColor=function(e){return g.linkLabelColor?g.linkLabelColor(b.getLinkLabel(e,i)):B.select(this).style("fill")},b.getLinkTextPositionX=function(e){return g.linkLabelAligned?t.get(e.depth).posXCenter+t.get(e.depth).maxX/2:(e.y-e.parent.y)/2},b.computeLabelDimensions=function(e){var i=new Map;e.each(function(e){var t={},n=B.select(this).node().getBBox().height,o=B.select(this).node().getBBox().width,a=B.select(this).text();i.get(e.depth)?((t=i.get(e.depth)).maxX<o&&(t.maxX=o,t.maxXText=a),t.posXCenter>(e.y-e.parent.y)/2&&(t.posXCenter=(e.y-e.parent.y)/2),t.maxY<n&&(t.maxY=n,t.maxYText=a)):(t.maxX=o,t.minX=o,t.maxY=n,t.maxXText=a,t.maxYText=a,t.posXCenter=(e.y-e.parent.y)/2),i.set(e.depth,t)}),t=i,g.debugOn&&(console.log("dimensions:"),console.log(i))};var L={},n=void 0,a=void 0,o=600;function u(e,t,n){var o={};o.width=n.svgDimensions.width-n.margin.right-n.margin.left,o.height=n.svgDimensions.height-n.margin.top-n.margin.bottom,o.i=0,o.tree=void 0,o.root=void 0,o.svg=void 0,o.counter=0,o.labelDimensions=[],o.svg=e.append("svg").attr("width",o.width+n.margin.right+n.margin.left).attr("height",o.height+n.margin.top+n.margin.bottom).append("g").attr("transform","translate("+n.margin.left+","+n.margin.top+")"),h(n,o,t),f(n,o),function(e,t,n){e.updateLinkWidth=function(){e.linkWidthStatic?t.tree.nodeSize([0,e.linkWidthValue]):f(e,t),x(t.root,e,t)},e.updateLinkStrength=function(){f(e,t),x(t.root,e,t)},e.updateAlignLeaves=function(){h(e,t,n),x(t.root,e,t)},e.updateDefault=function(){x(t.root,e,t)}}(n,o,t),x(o.root,n,o)}function h(t,n,e){n.tree=t.alignLeaves?B.cluster():B.tree(),n.tree.size([n.width,n.height]).nodeSize([0,t.linkWidthValue]),n.root=n.tree(e),t.propagate&&n.root.sum(function(e){return e[t.propagateField]}),n.root.each(function(e){e.name=e.id,e.id=n.i,n.i++,t.propagate&&(e.data[t.propagateField]=e.value)}),n.root.x0=n.root.x,n.root.y0=n.root.y,t.propagate&&(t.propagate=!1),t.debugOn&&(console.log("Data:"),console.log(e),console.log("Tree:"),console.log(n.root))}function f(t,e){var n=e.root.descendants();t.linkStrengthStatic||t.linkStrengthScale.domain(B.extent(n,function(e){return+e.data[t.linkStrengthField]})).range(t.linkStrengthRange),t.linkWidthStatic||t.linkWidthScale.domain(B.extent(n.slice(1),function(e){return+e.data[t.linkWidthField]})).range(t.linkWidthRange)}function x(e,n,t){n.nodeResort&&t.root.sort(n.nodeResortFunction);var o=t.tree(t.root),a=[];o.eachBefore(function(e){a.push(e)}),t.height=Math.max(500,a.length*n.linkHeight+n.margin.top+n.margin.bottom);var i=a.slice(1);a.forEach(function(e,t){e.x=t*n.linkHeight,n.linkWidthStatic||0!==t&&(e.y=e.parent.y+n.linkWidthScale(+e.data[n.linkWidthField]))}),B.select("svg").transition().duration(n.transitionDuration).attr("height",t.height);var r=L;r.initialize(n);var l=t.svg.selectAll("g.node").data(a,function(e){return e.id||(e.id=++t.i)}),d=l.enter().append("g").attr("class","node").style("visibility","hidden").on("click",function(e){return function(e,t,n){e.children?(e._children=e.children,e.children=null):(e.children=e._children,e._children=null),x(e,t,n)}(e,n,t)});d.call(r.appendNode),d.append("text").attr("class","nodeLabel").attr("x",n.nodeLabelPadding).attr("dy",".35em").attr("text-anchor","start").text(function(e){return e.data[n.nodeLabelField].length>n.nodeLabelLength?e.data[n.nodeLabelField].substring(0,n.nodeLabelLength)+"...":e.data[n.nodeLabelField]}),d.append("svg:title").text(function(e){return e.data[n.nodeLabelField]});var c=d.append("g").attr("class","node-bar").attr("display",n.nodeBarOn?"inline":"none");r.computeNodeExtend(),c.append("path").attr("class","node-bar connector").attr("d",r.getNodeBarD),c.append("rect").attr("class","node-bar box").attr("y",-8).attr("width",40).attr("height",16),c.append("text").attr("class","node-bar label").style("text-anchor","end").attr("dy",".35em").text(function(e){return e.data.size1}).style("font-size",".8em").style("fill","green"),d.attr("transform",function(){return"translate("+e.y0+","+e.x0+") scale(0.001, 0.001)"}).style("visibility","visible");var g=l.merge(d).transition().duration(n.transitionDuration);g.attr("transform",function(e){return"translate("+e.y+","+e.x+") scale(1,1)"}),g.call(r.updateNode),g.selectAll("g.node-bar").attr("display",n.nodeBarOn?"inline":"none"),g.selectAll(".node-bar.connector").attr("d",r.getNodeBarD),g.selectAll(".node-bar.box").attr("x",r.getXNodeBarRect),g.selectAll(".node-bar.label").attr("x",r.getXNodeBarText);var s=l.exit().transition().duration(n.transitionDuration);s.attr("transform",function(){return"translate("+e.y+","+e.x+") scale(0.001, 0.001)"}).remove(),s.select(".nodeLabel").style("fill-opacity",1e-6);var u=b;u.initialize(n);var h=t.svg.selectAll("g.link").data(i,function(e){return e.id+"->"+e.parent.id}),f=h.enter().insert("g","g.node").attr("class","link").attr("transform","translate("+e.y0+" "+e.x0+")"),p={x:e.x0,y:e.y0,parent:{x:e.x0,y:e.y0}};f.filter(function(e){return e.id===e.parent.children[e.parent.children.length-1].id}).append("path").attr("class","link down").attr("d",function(){return u.getLinkD(p,"down")}),f.append("path").attr("class","link right").attr("d",function(){return u.getLinkD(p,"right")}),f.append("text").style("opacity",1e-6);var k=h.merge(f);k.select("text").attr("class",n.linkLabelOnTop?"label ontop":"label above").attr("text-anchor",n.linkLabelAligned?"end":"middle").attr("dy",u.getInitialDy).text(function(e){return u.getLinkLabelFormatted(e)}).style("fill",u.getLinkLabelColor);var m=k.transition().duration(n.transitionDuration);u.computeLabelDimensions(B.selectAll(".link text.label")),m.attr("transform",function(e){return"translate("+e.parent.y+" "+e.parent.x+")"}),m.select("path.link.down").attr("d",function(e){return u.getLinkD(e,"down",!0)}).style("stroke",function(e){return n.linkColorInherit?u.getLinkStroke(e.parent):""}).style("stroke-width",function(e){return u.getLinkStrokeWidth(e.parent)}),m.select("path.link.right").attr("d",function(e){return u.getLinkD(e,"right")}).attr("transform",u.getLinkRTranslate).style("stroke",u.getLinkStroke).style("stroke-width",u.getLinkStrokeWidth),m.select("text").attr("dy",u.getDy).attr("x",u.getLinkTextPositionX).attr("y",function(e){return e.x-e.parent.x}).call(function(e){return e.tween("text",u.getLinkTextTween)}).style("opacity",1);var y=h.exit().transition().duration(n.transitionDuration).remove();y.attr("transform","translate("+e.y+" "+e.x+")");var v={x:e.x,y:e.y,parent:{x:e.x,y:e.y}};y.selectAll("path.link.down").attr("d",function(){return u.getLinkD(v,"down")}),y.selectAll("path.link.right").attr("d",function(){return u.getLinkD(v,"right")}).attr("transform","translate(0 0)"),y.select("text").attr("x",0).attr("y",0).style("opacity",1e-6),a.forEach(function(e){e.x0=e.x,e.y0=e.y})}L.initialize=function(e){n=e},L.appendNode=function(e){n.nodeImageFile?L.appendNodeImage(e):n.nodeImageSelectionAppend&&"function"==typeof n.nodeImageSelectionAppend?n.nodeImageSelectionAppend(e):L.appendNodeSVG(e)},L.updateNode=function(e){if(n.nodeImageFile)L.updateNodeImage(e);else if(n.nodeImageSelectionUpdate&&"function"==typeof n.nodeImageSelectionUpdate)n.nodeImageSelectionUpdate(e);else{if(n.nodeImageSelectionAppend&&"function"==typeof n.nodeImageSelectionAppend)return;L.updateNodeSVG(e)}},L.appendNodeSVG=function(e){e.append("rect").attr("class","nodeImage").attr("x",-5).attr("y",-5).attr("width",10).attr("height",10);var t=e;t.append("line").attr("class",function(e){return e._children?"cross nodeImage":"cross invisible"}).attr("x1",0).attr("y1",-5).attr("x2",0).attr("y2",5),t.append("line").attr("class",function(e){return e._children?"cross nodeImage":"cross invisible"}).attr("x1",-5).attr("y1",0).attr("x2",5).attr("y2",0)},L.updateNodeSVG=function(e){e.selectAll("line.cross").attr("class",function(e){return e._children?"cross nodeImage":"cross invisible"})},L.appendNodeImage=function(e){if(n.nodeImageSetBackground){var t=B.select("div.chart").style("background-color");e.append("rect").attr("width",n.nodeImageWidth).attr("height",n.nodeImageHeight).attr("x",n.nodeImageX).attr("y",n.nodeImageY).style("stroke",t).style("fill",t)}e.append("image").attr("class","nodeImage").attr("xlink:href",n.nodeImageFileAppend).attr("width",n.nodeImageWidth).attr("height",n.nodeImageHeight).attr("x",n.nodeImageX).attr("y",n.nodeImageY)},L.updateNodeImage=function(e){e.select(".nodeImage").attr("xlink:href",n.nodeImageFileAppend)},L.computeNodeExtend=function(){a=[],B.selectAll(".node").each(function(e){var t=B.select(this).select(".nodeLabel").node().getBBox(),n=B.select(this).select(".nodeImage").node().getBBox(),o=0!==t.width?t.x+t.width:n.x+n.width;e.nodeExtend=o,a.push(o+e.y+5)}),a.maxExtend=Math.max.apply(Math,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(a)),console.log("max: "+a.maxExtend),o=a.maxExtend+200},L.getNodeBarD=function(e){return"M "+(e.nodeExtend+5)+" 0 h "+(o-(e.y+e.nodeExtend+5))},L.getXNodeBarRect=function(e){return o-e.y-40},L.getXNodeBarText=function(e){return o-e.y-5},e.chart=function(n){var o={};function a(t){t.each(function(e){(console.log(e),console.log("dataSpec: "),console.log(n),void 0!==e)?i(t,e):l(function(n){var e={};if("object"===(void 0===n?"undefined":r(n))){if(e.data=n.source,e.hierarchyLevels=n.hierarchyLevels,e.flatData=!!Array.isArray(e.hierarchyLevels),e.keyField=n.key?n.key:"key",e.delimiter=n.delimiter?n.delimiter:",",e.separator=n.separator?n.separator:"$",e.autoConvert=!0,e.convertTypesFunction=B.autoType,"none"===n.convertTypes)e.autoConvert=!1;else if("function"==typeof n.convertTypes)if(e.flatData){e.convertTypesFunction=function(e){var t=n.convertTypes(e);return t.key=e.key,t.parent=e.parent,t.__he_name=e.__he_name,t}}else e.convertTypesFunction=n.convertTypes}else console.log("dataspec is not an object!");e.isJSON="object"===r(e.data),e.isJSON||(e.fromFile=!(!e.data.endsWith(".json")&&!e.data.endsWith(".csv")));return o.keyField=e.keyField,o.nodeLabelField=e.flatData?o.nodeLabelFieldFlatData:e.keyField,e}(n),t,o,i)})}function i(e,t){u(e,t,o)}return o.debugOn=!1,o.margin={top:20,right:10,bottom:20,left:10},o.svgDimensions={height:800,width:1400},o.transitionDuration=750,o.locale=void 0,o.defaultColor="grey",o.nodeBarOn=!0,o.nodeBarField="value",o.nodeBarUnit="",o.nodeBarFormatSpecifier=",.0f",o.nodeBarFormat=B.format(o.nodeBarFormatSpecifier),o.nodeImageFile=!1,o.nodeImageFileAppend=void 0,o.nodeImageSetBackground=!1,o.nodeImageWidth=10,o.nodeImageHeight=10,o.nodeImageX=o.nodeImageWidth/2,o.nodeImageY=o.nodeImageHeight/2,o.nodeImageSelectionAppend=void 0,o.nodeImageSelectionUpdate=void 0,o.nodeLabelField=void 0,o.nodeLabelFieldFlatData="__he_name",o.nodeLabelLength=50,o.nodeLabelPadding=10,o.nodeResort=!1,o.nodeResortAscending=!1,o.nodeResortField="value",o.nodeResortByHeight=!1,o.nodeResortFunction=function(e,t){var n=o.nodeResortByHeight?t.height-e.height:0;return 0===n&&(n="string"==typeof e.data[o.nodeResortField]?t.data[o.nodeResortField].localeCompare(e.data[o.nodeResortField]):t.data[o.nodeResortField]-e.data[o.nodeResortField]),o.nodeResortAscending&&(n*=-1),n},o.linkHeight=20,o.linkLabelField="value",o.linkLabelOn=!1,o.linkLabelUnit="",o.linkLabelOnTop=!0,o.linkLabelAligned=!0,o.linkLabelFormatSpecifier=",.0f",o.linkLabelFormat=B.format(o.linkLabelFormatSpecifier),o.linkWidthStatic=!0,o.linkWidthValue=30,o.linkWidthScale=B.scaleLinear(),o.linkWidthField="value",o.linkWidthRange=[15,100],o.linkStrengthStatic=!0,o.linkStrengthValue=1,o.linkStrengthScale=B.scaleLinear(),o.linkStrengthField="value",o.linkStrengthRange=[1,10],o.linkColorStatic=!0,o.linkColorScale=function(e){return e},o.linkColorField="color",o.linkColorInherit=!0,o.propagate=!1,o.propagateField="value",o.alignLeaves=!1,o.keyField="key",a.debugOn=function(e){return arguments.length?(o.debugOn=e,a):o.debugOn},a.defaultColor=function(e){return arguments.length?(o.defaultColor=e,"function"==typeof o.updateLinkColor&&o.updateLinkColor(),a):o.defaultColor},a.margin=function(e){return arguments.length?(o.margin=e,a):o.margin},a.svgDimensions=function(e){return arguments.length?(o.svgDimensions=e,a):o.svgDimensions},a.nodeLabelLength=function(e){return arguments.length?(o.nodeLabelLength=e,a):o.nodeLabelLength},a.nodeLabelPadding=function(e){return arguments.length?(o.nodeLabelPadding=e,a):o.nodeLabelPadding},a.transitionDuration=function(e){return arguments.length?(o.transitionDuration=e,a):o.transitionDuration},a.propagateValue=function(e){return arguments.length?(o.propagate=!0,o.propagateField=e,a):o.propagate+": "+o.propagateField},a.formatDefaultLocale=function(e){return arguments.length?("DE"===e&&(e={decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),o.locale=B.formatDefaultLocale(e),a):o.locale},a.nodeBar=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:o.nodeBarField,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return arguments.length?("string"==typeof e?(o.nodeBarField=e,o.nodeBarOn=!0):"boolean"==typeof e&&(o.nodeBarOn=e),o.nodeBarOn&&(t.locale&&a.formatDefaultLocale(t.locale),o.nodeBarColor=t.color||o.nodeBarColor,o.nodeBarUnit=t.unit||o.nodeBarUnit,o.nodeBarFormat=t.format?B.format(t.format):o.nodeBarFormat),"function"==typeof o.updateDefault&&o.updateDefault(),a):o.nodeBarField},a.nodeImageFile=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return arguments.length?(o.nodeImageFile=!0,o.nodeImageFileAppend=e,o.nodeImageWidth=t.width||o.nodeImageWidth,o.nodeImageHeight=t.height||o.nodeImageHeight,o.nodeImageX=t.x||-1*o.nodeImageWidth/2,o.nodeImageY=t.y||-1*o.nodeImageHeight/2,o.nodeImageSetBackground=t.setBackground||o.nodeImageSetBackground,"function"==typeof o.updateDefault&&o.updateDefault(),a):o.nodeImageFileAppend},a.nodeImageSelection=function(e,t){return arguments.length?(o.nodeImageSelectionAppend=!1===e?function(){}:e,o.nodeImageSelectionUpdate=t,o.nodeImageFile=!1,"function"==typeof o.updateDefault&&o.updateDefault(),a):o.nodeImageSelectionAppend},a.nodeSort=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:o.nodeSortField,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return arguments.length?("string"==typeof e&&(o.nodeResort=!0,o.nodeResortAscending=void 0!==t.ascending?t.ascending:o.nodeResortAscending,o.nodeResortByHeight=void 0!==t.sortByHeight?t.sortByHeight:o.nodeResortByHeight,o.nodeResortField=e),"function"==typeof o.updateDefault&&o.updateDefault(),a):o.nodeSortField},a.linkHeight=function(e){return arguments.length?(o.linkHeight=e,"function"==typeof o.updateDefault&&o.updateDefault(),a):o.linkHeight},a.linkLabel=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:o.linkLabelField,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return arguments.length?("string"==typeof e?(o.linkLabelField=e,o.linkLabelOn=!0):"boolean"==typeof e&&(o.linkLabelOn=e),o.linkLabelOn&&(t.locale&&a.formatDefaultLocale(t.locale),o.linkLabelColor=t.color||o.linkLabelColor,o.linkLabelUnit=t.unit||o.linkLabelUnit,o.linkLabelFormat=t.format?B.format(t.format):o.linkLabelFormat,o.linkLabelOnTop=void 0!==t.onTop?t.onTop:o.linkLabelOnTop,o.linkLabelAligned=void 0!==t.align?t.align:o.linkLabelAligned),"function"==typeof o.updateDefault&&o.updateDefault(),a):o.linkLabelField},a.linkWidth=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:o.linkWidthField,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return arguments.length?("number"==typeof e?(o.linkWidthStatic=!0,o.linkWidthValue=e):"string"==typeof e&&(o.linkWidthStatic=!1,o.linkWidthField=e,o.linkWidthScale=t.scale||o.linkWidthScale,o.linkWidthRange=t.range||o.linkWidthRange),"function"==typeof o.updateLinkWidth&&o.updateLinkWidth(),a):o.linkWidthValue},a.linkStrength=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:o.linkStrengthField,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return arguments.length?("number"==typeof e?(o.linkStrengthStatic=!0,o.linkStrengthValue=e):"string"==typeof e&&(o.linkStrengthStatic=!1,o.linkStrengthField=e,o.linkStrengthScale=t.scale||o.linkStrengthScale,o.linkStrengthRange=t.range||o.linkStrengthRange),"function"==typeof o.updateLinkStrength&&o.updateLinkStrength(),a):o.linkStrengthValue},a.linkColor=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:o.linkColorField,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return arguments.length?(o.linkColorStatic=!1,o.linkColorField=e,o.linkColorScale=t.scale||o.linkColorScale,o.linkColorInherit=void 0!==t.inherit?t.inherit:o.linkColorInherit,"function"==typeof o.updateDefault&&o.updateDefault(),a):o.linkColorField},a.alignLeaves=function(e){return arguments.length?(o.alignLeaves=e,"function"==typeof o.updateAlignLeaves&&o.updateAlignLeaves(),a):o.alignLeaves},a},Object.defineProperty(e,"__esModule",{value:!0})});